apiVersion: v1 
kind: Secret
metadata:
  name: svc-secret
  namespace: default
data:
  nginx.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURJekNDQWd1Z0F3SUJBZ0lKQU9HSGtBOTJLaVB3TUEwR0NTcUdTSWIzRFFFQkN3VUFNQ2d4RWpBUUJnTlYKQkFNTUNYTjJZeTF1WjJsdWVERVNNQkFHQTFVRUNnd0pjM1pqTFc1bmFXNTRNQjRYRFRFNU1Ea3hNVEEyTXpregpORm9YRFRJd01Ea3hNREEyTXprek5Gb3dLREVTTUJBR0ExVUVBd3dKYzNaakxXNW5hVzU0TVJJd0VBWURWUVFLCkRBbHpkbU10Ym1kcGJuZ3dnZ0VpTUEwR0NTcUdTSWIzRFFFQkFRVUFBNElCRHdBd2dnRUtBb0lCQVFESTQ3OUcKVU55RU4yQ3dlQmU2TThZZUJFcHBIdElDazRNWnd4TUlobTNwbmIzTytaQnQ3S3VtZXFCZTBiQXd6NjVvYnNVYwpocVNlSGsvR09Db0Irc1NqUE40UXZia092Nk5rM0FzQldPc2UwVEZBbkZIN3J2bW1aVHZGRGpPSHJqT08rOUxNCkIrVkJTNGN3VFpmUkRXRGs3K1RyTCtWQUo1QlhwenhoTHdNWVAwZXFlRWt0RTU5TnlNajFyeDAwTHg4SGg2WDQKQkhZYitjSEthTDdrWm1KN253NkdFd3YrckpxQlVMalFEN1dUcXliS1JQbFF4THRobElmZDdoZUtFOEliN3hIcApDdlA3TU5XdVA5anY1a0dsYjJnQVRvcTdpZUVOencwTWdCUE9ZUVBnYkM4a0xjTXlyWEFpaGV4KzlhdEJBOUgwCnhQMlBkdzVEVWkrdTdENjNBZ01CQUFHalVEQk9NQjBHQTFVZERnUVdCQlJGZFpIWjJEZzR1SXBjL3hBb3BuZ3UKYmtMSlJ6QWZCZ05WSFNNRUdEQVdnQlJGZFpIWjJEZzR1SXBjL3hBb3BuZ3Via0xKUnpBTUJnTlZIUk1FQlRBRApBUUgvTUEwR0NTcUdTSWIzRFFFQkN3VUFBNElCQVFCMmZ3T3djdUxyL01BYTFZNTk0K1ZnbENadFI4N2pKYWJ6ClpXSUdhazhpbGZDRVdNV0padGxIeDFNdXFWSCtqVGpWTmRPbDNUZFI0R3NxZkVMeGNYMmZ0WjFjeEI2enZ1dmEKVHRpYTl6V21odlBNWmxNR21BWGFJZ3BWOUk0eUFaRHhOdUtsTXRmdDUxdmpmdUZrYy9SQzhMakxxZ0p3VjU0VgpmZC90WFZVRXRqOTRIamZlR2NSc2RCSnloTlRVK0VuMlZYOEdhNG9uendkRFJsZUF1RC9mSlR3ZmdQbTUyWjZlCmVVYnQvYjhhakQzTzN3RXhMWTRNa1l1YWJlV2IzdEFJa3Flak4wNlpSdlR4ODB6M0RMZ1dTelFkVEduM3ZNdFMKd0pCTDdBVENJWHIwUnFRY3F0UlFtTG5pVWxWUVJQYzJUNWxQSC9SU2owZjREcUczcnVlagotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
  nginx.key: LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tCk1JSUV2UUlCQURBTkJna3Foa2lHOXcwQkFRRUZBQVNDQktjd2dnU2pBZ0VBQW9JQkFRREk0NzlHVU55RU4yQ3cKZUJlNk04WWVCRXBwSHRJQ2s0TVp3eE1JaG0zcG5iM08rWkJ0N0t1bWVxQmUwYkF3ejY1b2JzVWNocVNlSGsvRwpPQ29CK3NTalBONFF2YmtPdjZOazNBc0JXT3NlMFRGQW5GSDdydm1tWlR2RkRqT0hyak9PKzlMTUIrVkJTNGN3ClRaZlJEV0RrNytUckwrVkFKNUJYcHp4aEx3TVlQMGVxZUVrdEU1OU55TWoxcngwMEx4OEhoNlg0QkhZYitjSEsKYUw3a1ptSjdudzZHRXd2K3JKcUJVTGpRRDdXVHF5YktSUGxReEx0aGxJZmQ3aGVLRThJYjd4SHBDdlA3TU5XdQpQOWp2NWtHbGIyZ0FUb3E3aWVFTnp3ME1nQlBPWVFQZ2JDOGtMY015clhBaWhleCs5YXRCQTlIMHhQMlBkdzVEClVpK3U3RDYzQWdNQkFBRUNnZ0VCQUpRQjRDSVJYM2IyU2dHYWFYamh2bHpOTW5taW9INFBhcTduWDdXUFBabTYKZzJianpqcCsvYlNKY25DSnMzTXpBRCtuSlFpd1ZzYThkSEFKWDBIWUhWcGJkUTBHaXpySGpMMjV0VTRIMGlzQgpXM1ZMOXNjbEVvQTY0Nzk2aUJLMkVQeU9vcTk2UGJsT3lVcVlVSHRRalF2L2h6eVVMQ2FKUDdxazEwS08zWXZWCmZJWncxQlJJTVZTVWd2cmpkcTNHVEFxWVhnS2taS0RPaS9Gc0lyeXg5aGxSUzAxZm9lUkd3aExZKzZ4MFgwcHoKbEV1NUd3Z1ZUc0ZobnJsaFBGRWF3UVBnYXpBYVhxL2dkUmZ0YjdZcjdPNXlKdFZqa2w0Zm43Z3JSSFBJdW96UQpUbXVKUDdpTDNleU9acnBpNEZmWkl0RGNUY1NqQW8yQ214MFFOVnMraDdFQ2dZRUE5QzRwd004bGpqZVEvVS9xCmRYOWVPTHdHQ2ViY1RoaU5SQzA1UGxNSlh3VUd3TVEwbUZpNElyd09uM0lpMjlTVDlGSmhlZHZQemdBc3FEcmMKaVE0K0Rjc0lZWlNVaUQ1VDFObkczNzFQRGpuWTVzNW1EWTBrMVhJbGV4V21yLzQ5MTZDNjdDckpaUjY2a0p3QwpmWGRHbUgrQ0hBRFoxSCtPQUVxcThIN3lYRWtDZ1lFQTBwMGlTK3QrU05aRWtJL0NBYWdESFVxcFA1WTBhYXBJClphRHE2cVh4QVZpcDlLUGtncWNxWnRsZmhZaHlJVUkvb1dNRXVIalVvbkRBckh3Vmtsb3UvS2dPVmZEd1E0eGoKUHcramNCbGNiSWtBalFWQStSRGlkNEhXVGMyb2VvQ0pQNG1yd3lHMXBIVXhqNDJzU280Q1ZINWJxcWVsdGQyegpjeFJUeUdiN3d2OENnWUE3aWZZTVdYWWkwMUc3TW4xTTRSMnNYOHhwSmEyYUxVcGswVklmN0VkZ3IrMFJtOFhuClQ5cTJQWHlqVEVWTHJPM1dxUyt6Y3ZHY25WWkdQdlAvUjBYQ1B6dHY3N2EzOGRxbkQrTDZNMExQaVRObU0vV1cKWUZBVzY1cFFCTnQ4RmxZbCtiOGFUdVNFajVXV0pUUkdPNHN2TEFnaG8rTjVlUkM2NlhuODRqZGVZUUtCZ0VoSQpIV2tvM1NKcVJ3WEdFTE00MGpqUFV0NjcwaWtoZzg4OU51SnBLUmxwTUlzQlpIOWlsNjdNazNma3FDYTU4ZFNWCmd4MDhldDExRE9zbGV0SExtYXlra0tiMkZiOVpBd2ExZTBZUnJpS2hza3F6cnVUTDRxMVpKZzkxc1lpNWJHRWUKQXBEcGxNbG9YeVlCWFV3SkNNdXV3ZzhEa2wra1F0NFA3K0VyVnVSSkFvR0FVeVdIcERaZHRXZEs3YVpXUldqMQo4bTJFOHdsWWJwRUM5QjlTUHZXUW5ja0tyT3VTVERYWm5DeGtvOHRSZS85THhFV2JMaUtyYk5DTEZTbmhnWS83CkxVTHZMRGwwZDIwZGFMcERzSi9mWVl1eUpwd1BMazRNb09XaDNnUFJzWWQ0T3FxU0pFVzZxZzJBTjNNUDFVSmQKR1RVNTU3cWJ1Mjd2dzd3Z3N0RGZaQ3M9Ci0tLS0tRU5EIFBSSVZBVEUgS0VZLS0tLS0K

---
apiVersion: v1 
kind: Service
metadata:
  name: svc-deploy
spec:
  type: NodePort 
  ports: 
  - port: 80
    protocol: TCP
    name: http
  - port: 443
    protocol: TCP
    name: https
  selector:
    run: svc-nginx
---
apiVersion: apps/v1 # for versions before 1.9.0 use apps/v1beta2
kind: Deployment
metadata:
  name: svc-nginx
spec:
  replicas: 3 # tells deployment to run 2 pods matching the template
  selector:
    matchLabels:
      run: svc-nginx
  template:
    metadata:
      labels:
        run: svc-nginx
    spec:
      volumes:
      - name: svc-secret-vol
        secret: 
          secretName: svc-secret
      containers:
      - name: nginxhttps
        #image: nginx:1.7.9
        image: bprashanth/nginxhttps:1.0
        ports:
        - containerPort: 443
        - containerPort: 80
        volumeMounts:
        - mountPath: /etc/nginx/ssl
          name: svc-secret-vol
